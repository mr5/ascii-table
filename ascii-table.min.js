(function(){"use strict";function t(t,i){this.options=i||{},this.reset(t)}var i=require("word-width"),e=Array.prototype.slice,r=Object.prototype.toString;t.LEFT=0,t.CENTER=1,t.RIGHT=2,t.factory=function(i,e){return new t(i,e)},t.align=function(i,e,r,n){return i===t.LEFT?t.alignLeft(e,r,n):i===t.RIGHT?t.alignRight(e,r,n):i===t.CENTER?t.alignCenter(e,r,n):t.alignAuto(e,r,n)},t.alignLeft=function(t,e,r){if(!e||0>e)return"";(void 0===t||null===t)&&(t=""),r===void 0&&(r=" "),"string"!=typeof t&&(t=""+t);var n=e+1-i(t);return 0>=n?t:t+Array(e+1-i(t)).join(r)},t.alignCenter=function(e,r,n){if(!r||0>r)return"";(void 0===e||null===e)&&(e=""),n===void 0&&(n=" "),"string"!=typeof e&&(e=""+e);var o=i(e),s=Math.floor(r/2-o/2),a=Math.abs(o%2-r%2),r=i(e);return t.alignRight("",s,n)+e+t.alignLeft("",s+a,n)},t.alignRight=function(t,e,r){if(!e||0>e)return"";(void 0===t||null===t)&&(t=""),r===void 0&&(r=" "),"string"!=typeof t&&(t=""+t);var n=e+1-i(t);return 0>=n?t:Array(e+1-i(t)).join(r)+t},t.alignAuto=function(e,n,o){(void 0===e||null===e)&&(e="");var s=r.call(e);if(o||(o=" "),n=+n,"[object String]"!==s&&(e=""+e),n>i(e))switch(s){case"[object Number]":return t.alignRight(e,n,o);default:return t.alignLeft(e,n,o)}return e},t.arrayFill=function(t,i){for(var e=Array(t),r=0;r!==t;r++)e[r]=i;return e},t.prototype.reset=t.prototype.clear=function(i){return this.__name="",this.__nameAlign=t.CENTER,this.__rows=[],this.__maxCells=0,this.__aligns=[],this.__colMaxes=[],this.__spacing=1,this.__heading=null,this.__headingAlign=t.CENTER,this.setBorder(),"[object String]"===r.call(i)?this.__name=i:"[object Object]"===r.call(i)&&this.fromJSON(i),this},t.prototype.setBorder=function(t,i,e,r){return this.__border=!0,1===arguments.length&&(i=e=r=t),this.__edge=t||"|",this.__fill=i||"-",this.__top=e||".",this.__bottom=r||"'",this},t.prototype.removeBorder=function(){return this.__border=!1,this.__edge=" ",this.__fill=" ",this},t.prototype.setAlign=function(t,i){return this.__aligns[t]=i,this},t.prototype.setTitle=function(t){return this.__name=t,this},t.prototype.getTitle=function(){return this.__name},t.prototype.setTitleAlign=function(t){return this.__nameAlign=t,this},t.prototype.sort=function(t){return this.__rows.sort(t),this},t.prototype.sortColumn=function(t,i){return this.__rows.sort(function(e,r){return i(e[t],r[t])}),this},t.prototype.setHeading=function(t){return(arguments.length>1||"[object Array]"!==r.call(t))&&(t=e.call(arguments)),this.__heading=t,this},t.prototype.getHeading=function(){return this.__heading.slice()},t.prototype.setHeadingAlign=function(t){return this.__headingAlign=t,this},t.prototype.addRow=function(t){return(arguments.length>1||"[object Array]"!==r.call(t))&&(t=e.call(arguments)),this.__maxCells=Math.max(this.__maxCells,t.length),this.__rows.push(t),this},t.prototype.getRows=function(){return this.__rows.slice().map(function(t){return t.slice()})},t.prototype.addRowMatrix=function(t){for(var i=0;t.length>i;i++)this.addRow(t[i]);return this},t.prototype.addData=function(t,i,e){if("[object Array]"!==r.call(t))return this;for(var n=0,o=t.length;o>n;n++){var s=i(t[n]);e?this.addRowMatrix(s):this.addRow(s)}return this},t.prototype.clearRows=function(){return this.__rows=[],this.__maxCells=0,this.__colMaxes=[],this},t.prototype.setJustify=function(t){return 0===arguments.length&&(t=!0),this.__justify=!!t,this},t.prototype.toJSON=function(){return{title:this.getTitle(),heading:this.getHeading(),rows:this.getRows()}},t.prototype.parse=t.prototype.fromJSON=function(t){return this.clear().setTitle(t.title).setHeading(t.heading).addRowMatrix(t.rows)},t.prototype.render=t.prototype.valueOf=t.prototype.toString=function(){for(var e,r=this,n=[],o=this.__maxCells,s=t.arrayFill(o,0),a=3*o,h=this.__rows,_=this.__border,l=this.__heading?[this.__heading].concat(h):h,u=0;l.length>u;u++)for(var p=l[u],g=0;o>g;g++){var c=p[g];s[g]=Math.max(s[g],c?i(""+c):0)}this.__colMaxes=s,e=this.__justify?Math.max.apply(null,s):0,s.forEach(function(t){a+=e?e:t+r.__spacing}),e&&(a+=s.length),a-=this.__spacing,_&&n.push(this._seperator(a-o+1,this.__top)),this.__name&&(n.push(this._renderTitle(a-o+1)),_&&n.push(this._seperator(a-o+1))),this.__heading&&(n.push(this._renderRow(this.__heading," ",this.__headingAlign)),n.push(this._rowSeperator(o,this.__fill)));for(var u=0;this.__rows.length>u;u++)n.push(this._renderRow(this.__rows[u]," "));_&&n.push(this._seperator(a-o+1,this.__bottom));var f=this.options.prefix||"";return f+n.join("\n"+f)},t.prototype._seperator=function(i,e){return e||(e=this.__edge),e+t.alignRight(e,i,this.__fill)},t.prototype._rowSeperator=function(){var i=t.arrayFill(this.__maxCells,this.__fill);return this._renderRow(i,this.__fill)},t.prototype._renderTitle=function(i){var e=" "+this.__name+" ",r=t.align(this.__nameAlign,e,i-1," ");return this.__edge+r+this.__edge},t.prototype._renderRow=function(i,e,r){for(var n=[""],o=this.__colMaxes,s=0;this.__maxCells>s;s++){var a=i[s],h=this.__justify?Math.max.apply(null,o):o[s],_=h,l=this.__aligns[s],u=r,p="alignAuto";r===void 0&&(u=l),u===t.LEFT&&(p="alignLeft"),u===t.CENTER&&(p="alignCenter"),u===t.RIGHT&&(p="alignRight"),n.push(t[p](a,_,e))}var g=n.join(e+this.__edge+e);return g=g.substr(1,g.length),g+e+this.__edge},["Left","Right","Center"].forEach(function(i){var r=t[i.toUpperCase()];["setAlign","setTitleAlign","setHeadingAlign"].forEach(function(n){t.prototype[n+i]=function(){var t=e.call(arguments).concat(r);return this[n].apply(this,t)}})}),"undefined"!=typeof exports?module.exports=t:this.AsciiTable=t}).call(this);